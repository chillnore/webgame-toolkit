<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
		 xmlns:s="library://ns.adobe.com/flex/spark"
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:ui="statm.dev.imageresourceviewer.ui.*"
		 width.normal="130"
		 width.expanded="80%"
		 height="100%">

	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			
			import statm.dev.imageresourceviewer.AppState;
			import statm.dev.imageresourceviewer.data.Element;
			import statm.dev.imageresourceviewer.data.resource.ResourceLib;
			private var buttons : Array = [hero, weapon, mount, pet, mob, npc, fx];

			private function btn_clickHandler(event : MouseEvent) : void
			{
				var selectedElem : Element;

				switch (event.currentTarget)
				{
					case hero:
						AppState.selectedCategory = ResourceLib.hero;
						selectedElem = AppState.selectedHero;
						break;
					case weapon:
						AppState.selectedCategory = ResourceLib.weapon;
						selectedElem = AppState.selectedWeapon;
						break;
					case mount:
						AppState.selectedCategory = ResourceLib.mount;
						selectedElem = AppState.selectedMount;
						break;
					case npc:
						AppState.selectedCategory = ResourceLib.npc;
						selectedElem = AppState.selectedNPC;
						break;
					case mob:
						AppState.selectedCategory = ResourceLib.mob;
						selectedElem = AppState.selectedMob;
						break;
					case pet:
						AppState.selectedCategory = ResourceLib.pet;
						selectedElem = AppState.selectedPet;
						break;
					case fx:
						AppState.selectedCategory = ResourceLib.fx;
						selectedElem = AppState.selectedFX;
						break;
				}
				
				if (selectedElem)
				{
					FlexGlobals.topLevelApplication.resourceList.selectedItem = selectedElem;
				}
				else
				{
					FlexGlobals.topLevelApplication.resourceList.selectedIndex = 0;
				}
			}

			public function setCategoryButtons(buttons : Array) : void
			{
				hero.currentState
					= weapon.currentState
					= mount.currentState
					= npc.currentState
					= mob.currentState
					= pet.currentState
					= fx.currentState
					= "collapseNormal";

				for each (var buttonName : String in buttons)
				{
					this[buttonName].currentState = "normal";
				}
			}
		]]>
	</fx:Script>

	<s:states>
		<s:State name="normal"/>
		<s:State name="expanded"/>
	</s:states>

	<s:VGroup bottom="0"
			  top="0"
			  left="0"
			  width="130"
			  paddingRight="5"
			  paddingLeft="5"
			  gap="6">
		<ui:CategoryButton id="hero"
						   categoryName="角色"
						   element="{AppState.selectedHero}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="weapon"
						   categoryName="武器"
						   element="{AppState.selectedWeapon}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="mount"
						   categoryName="坐骑"
						   element="{AppState.selectedMount}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="npc"
						   categoryName="NPC"
						   element="{AppState.selectedNPC}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="mob"
						   categoryName="怪物"
						   element="{AppState.selectedMob}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="pet"
						   categoryName="宠物"
						   element="{AppState.selectedPet}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
		<ui:CategoryButton id="fx"
						   categoryName="特效"
						   element="{AppState.selectedFX}"
						   click="btn_clickHandler(event)"
						   currentState="collapseNormal"/>
	</s:VGroup>
</s:Group>
